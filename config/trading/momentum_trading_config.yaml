# Momentum Protection Trading Configuration
# ==========================================
# Daily momentum strategy with rule-based crash protection

strategy:
  name: "MomentumProtection"
  display_name: "Momentum with Crash Protection"

  # Execution schedule
  rebalance_time: "15:55:00"  # 3:55 PM EST

  # Position parameters
  top_n: 10                    # Number of stocks to hold
  position_size_pct: 0.10      # 10% per position

  # Risk protection parameters
  reduced_exposure: 0.50       # 50% exposure when risk signals trigger
  vix_threshold: 25.0          # VIX level that triggers protection
  vix_spike_threshold: 0.20    # VIX 5-day spike threshold (20%)
  spy_dd_threshold: -0.05      # SPY drawdown threshold (-5%)
  mom_vol_percentile: 0.90     # Momentum volatility percentile (90th)

  # Transaction cost assumptions
  slippage_per_share: 0.01     # $0.01 per share slippage

# Universe configuration
universe:
  type: "sp500"                 # Full S&P 500
  source: "backtest_lists/sp500-2025.csv"

  # Alternative universes (uncomment to use)
  # type: "sp500_top100"
  # source: "backtest_lists/sp500_top100-2025.csv"
  #
  # type: "sp500_top250"
  # source: "backtest_lists/sp500_top250-2025.csv"

# Position manager configuration
position_manager:
  max_position_size_pct: 0.12  # Max 12% per position (with buffer)
  max_concurrent_positions: 12 # Max 12 positions (with buffer)
  stop_loss_pct: -0.10         # 10% stop loss per position (optional)

# Risk management
risk:
  # Portfolio-level risk
  max_daily_loss_pct: 0.05     # Stop trading if down 5% in a day
  max_total_drawdown_pct: 0.20 # Alert if total drawdown exceeds 20%

  # Position-level risk
  max_position_loss_pct: 0.15  # Close position if down 15%

  # Market-level risk (already in strategy)
  vix_halt_threshold: 40       # Halt all trading if VIX > 40

# Health check configuration
health_check:
  min_buying_power: 5000.0     # Minimum buying power required
  min_portfolio_value: 10000.0 # Minimum portfolio value
  max_position_age_hours: 48   # Alert on positions older than 48h

# Logging configuration
logging:
  level: "INFO"
  log_signals: true
  log_risk_status: true
  log_rebalance_details: true

# Position sizing configurations (alternatives)
position_configs:
  conservative:
    top_n: 5
    position_size_pct: 0.10
    reduced_exposure: 0.25
    description: "5 positions, 25% exposure when risk high"

  moderate:
    top_n: 10
    position_size_pct: 0.10
    reduced_exposure: 0.50
    description: "10 positions, 50% exposure when risk high (default)"

  aggressive:
    top_n: 15
    position_size_pct: 0.067
    reduced_exposure: 0.75
    description: "15 positions, 75% exposure when risk high"
